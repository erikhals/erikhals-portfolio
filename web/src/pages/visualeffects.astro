---
import { sanityClient } from 'sanity:client'
import BaseLayout from '../layouts/BaseLayout.astro'
import { type Project } from '../../utils/sanity'

const category = await sanityClient.fetch(`*[_type == "category" && title == "Visual Effects"][0]{
  _id, title,
  "projects": *[_type == "project" && references(^._id) && featured == true]
} `)

---
<BaseLayout title="Erik Hals - Creative Direction" url="/visualeffects">

{ category.projects && <ul>
  { category.projects.map((project: Project) => (
    <li><a href={project.slug.current}>{project.title}</a></li>
  ))}
  </ul>
}
</BaseLayout>
